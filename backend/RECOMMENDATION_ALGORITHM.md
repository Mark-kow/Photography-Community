# 推荐算法说明

## 综合推荐算法

系统现在使用基于多指标加权的推荐算法，综合考虑以下因素：

### 评分公式

```
推荐分数 = 点赞分 + 评论分 + 浏览分 + 时间新鲜度分
```

### 权重配置

| 指标 | 权重 | 说明 |
|------|------|------|
| **点赞数** | 3分/个 | 用户主动点赞，表示认可 |
| **评论数** | 5分/个 | 评论比点赞更有价值，代表深度互动 |
| **浏览量** | 0.1分/次 | 浏览量大但权重低，避免刷浏览量 |
| **时间新鲜度** | 0-70分 | 7天内的作品获得时间加权 |

### 时间衰减策略

- **0-1天**：70分时间加权（最新内容优先）
- **1-2天**：60分时间加权
- **2-3天**：50分时间加权
- **3-4天**：40分时间加权
- **4-5天**：30分时间加权
- **5-6天**：20分时间加权
- **6-7天**：10分时间加权
- **7天后**：0分时间加权（只依赖互动数据）

### 算法示例

#### 案例1：新发布的作品
- 点赞：10个 → 30分
- 评论：5个 → 25分
- 浏览：100次 → 10分
- 发布时间：1天前 → 60分
- **总分：125分**

#### 案例2：一周前的热门作品
- 点赞：100个 → 300分
- 评论：50个 → 250分
- 浏览：5000次 → 500分
- 发布时间：7天前 → 10分
- **总分：1060分**

#### 案例3：一个月前的经典作品
- 点赞：500个 → 1500分
- 评论：200个 → 1000分
- 浏览：20000次 → 2000分
- 发布时间：30天前 → 0分
- **总分：4500分**

### 算法优势

1. ✅ **平衡新旧内容**：新作品有时间加权，老作品依靠质量
2. ✅ **重视深度互动**：评论权重最高，鼓励有价值的讨论
3. ✅ **防止刷量**：浏览量权重很低，防止恶意刷量
4. ✅ **自动排序**：数据库层面计算，性能好
5. ✅ **公平性**：新用户的优质作品也能获得曝光

### 未来优化方向

1. **个性化推荐**：基于用户历史行为（已点赞、收藏的作品风格）
2. **协同过滤**：推荐相似用户喜欢的作品
3. **负反馈**：用户屏蔽、举报的作品降权
4. **多样性**：避免推荐相同风格或作者的作品扎堆
5. **时段偏好**：晚上推荐夜景，周末推荐周边活动

### 调整权重

如需调整权重，修改 `/backend/src/controllers/workController.js` 中的 `getFeed` 方法：

```javascript
// 修改这里的权重参数
w.like_count * 3 +        // 点赞权重
w.comment_count * 5 +      // 评论权重
w.view_count * 0.1 +       // 浏览权重
(7 - DATEDIFF(NOW(), w.created_at)) * 10  // 时间权重（每天10分）
```

### 监控指标

建议监控以下指标来评估推荐效果：

- **用户停留时长**：推荐内容是否吸引人
- **点击率（CTR）**：推荐列表中作品的点击比例
- **互动率**：点赞、评论、收藏的转化率
- **新作品曝光率**：新用户作品是否获得机会
- **用户留存率**：推荐质量是否影响留存
# 推荐算法说明

## 综合推荐算法

系统现在使用基于多指标加权的推荐算法，综合考虑以下因素：

### 评分公式

```
推荐分数 = 点赞分 + 评论分 + 浏览分 + 时间新鲜度分
```

### 权重配置

| 指标 | 权重 | 说明 |
|------|------|------|
| **点赞数** | 3分/个 | 用户主动点赞，表示认可 |
| **评论数** | 5分/个 | 评论比点赞更有价值，代表深度互动 |
| **浏览量** | 0.1分/次 | 浏览量大但权重低，避免刷浏览量 |
| **时间新鲜度** | 0-70分 | 7天内的作品获得时间加权 |

### 时间衰减策略

- **0-1天**：70分时间加权（最新内容优先）
- **1-2天**：60分时间加权
- **2-3天**：50分时间加权
- **3-4天**：40分时间加权
- **4-5天**：30分时间加权
- **5-6天**：20分时间加权
- **6-7天**：10分时间加权
- **7天后**：0分时间加权（只依赖互动数据）

### 算法示例

#### 案例1：新发布的作品
- 点赞：10个 → 30分
- 评论：5个 → 25分
- 浏览：100次 → 10分
- 发布时间：1天前 → 60分
- **总分：125分**

#### 案例2：一周前的热门作品
- 点赞：100个 → 300分
- 评论：50个 → 250分
- 浏览：5000次 → 500分
- 发布时间：7天前 → 10分
- **总分：1060分**

#### 案例3：一个月前的经典作品
- 点赞：500个 → 1500分
- 评论：200个 → 1000分
- 浏览：20000次 → 2000分
- 发布时间：30天前 → 0分
- **总分：4500分**

### 算法优势

1. ✅ **平衡新旧内容**：新作品有时间加权，老作品依靠质量
2. ✅ **重视深度互动**：评论权重最高，鼓励有价值的讨论
3. ✅ **防止刷量**：浏览量权重很低，防止恶意刷量
4. ✅ **自动排序**：数据库层面计算，性能好
5. ✅ **公平性**：新用户的优质作品也能获得曝光

### 未来优化方向

1. **个性化推荐**：基于用户历史行为（已点赞、收藏的作品风格）
2. **协同过滤**：推荐相似用户喜欢的作品
3. **负反馈**：用户屏蔽、举报的作品降权
4. **多样性**：避免推荐相同风格或作者的作品扎堆
5. **时段偏好**：晚上推荐夜景，周末推荐周边活动

### 调整权重

如需调整权重，修改 `/backend/src/controllers/workController.js` 中的 `getFeed` 方法：

```javascript
// 修改这里的权重参数
w.like_count * 3 +        // 点赞权重
w.comment_count * 5 +      // 评论权重
w.view_count * 0.1 +       // 浏览权重
(7 - DATEDIFF(NOW(), w.created_at)) * 10  // 时间权重（每天10分）
```

### 监控指标

建议监控以下指标来评估推荐效果：

- **用户停留时长**：推荐内容是否吸引人
- **点击率（CTR）**：推荐列表中作品的点击比例
- **互动率**：点赞、评论、收藏的转化率
- **新作品曝光率**：新用户作品是否获得机会
- **用户留存率**：推荐质量是否影响留存
