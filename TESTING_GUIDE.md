# 课程和技巧库管理功能测试指南

## 快速开始

### 1. 访问后台管理系统

打开浏览器访问：
```
http://127.0.0.1:5173/admin
```

如果未登录，会自动跳转到登录页面。

### 2. 登录账号

使用已有账号登录（需要是注册用户）

### 3. 导航到管理页面

登录后在左侧菜单中可以看到：
- 📊 仪表盘
- 📍 拍摄地管理
- 📸 课程管理（新增）
- 📸 技巧库管理（新增）
- 👤 用户管理（暂未开发）
- 🖼️ 作品管理（暂未开发）

## 课程管理测试

### 测试场景1: 查看课程列表

1. 点击左侧菜单"课程管理"
2. 查看课程列表，包含以下列：
   - ID
   - 封面图
   - 课程名称
   - 分类（拍摄/后期/器材）
   - 难度（入门/进阶/高级）
   - 讲师
   - 章节数
   - 学习人数
   - 状态（草稿/已发布/已下架）
   - 操作（编辑/删除）

### 测试场景2: 搜索和筛选课程

1. 在搜索框输入关键词，按回车或点击"搜索"
2. 在分类下拉框选择"拍摄"、"后期"或"器材"
3. 点击"重置"清空筛选条件

### 测试场景3: 创建新课程

1. 点击右上角"添加课程"按钮
2. 填写表单：
   - **课程标题**（必填）：例如"人像摄影入门教程"
   - **封面图片URL**（必填）：例如"https://example.com/cover.jpg"
   - **课程描述**：详细介绍课程内容
   - **分类**（必填）：选择"拍摄"
   - **难度**（必填）：选择"入门"
   - **类型**：选择"视频"或"文章"
   - **讲师ID**：输入讲师的用户ID（例如：1）
   - **课程时长**：输入分钟数（例如：120）
   - **价格**：输入价格（例如：99.00）
   - **是否免费**：选择"免费"或"付费"
   - **状态**：选择"草稿"、"已发布"或"已下架"
3. 点击"确定"提交
4. 查看列表中是否显示新创建的课程

### 测试场景4: 编辑课程

1. 在列表中找到要编辑的课程
2. 点击该课程行的"编辑"按钮
3. 修改表单中的信息（例如：修改课程标题）
4. 点击"确定"保存修改
5. 查看列表中该课程信息是否已更新

### 测试场景5: 删除课程

1. 在列表中找到要删除的课程
2. 点击该课程行的"删除"按钮
3. 在确认对话框中点击"确定"
4. 查看该课程状态是否变为"已下架"（软删除）

### 测试场景6: 分页测试

1. 如果课程数量超过10条，页面底部会显示分页器
2. 点击页码切换页面
3. 调整每页显示数量（10/20/50/100）

## 技巧库管理测试

### 测试场景1: 查看技巧列表

1. 点击左侧菜单"技巧库管理"
2. 查看技巧列表，包含以下列：
   - ID
   - 封面图
   - 标题
   - 分类（人像/风光/街拍/建筑）
   - 技术类型（曝光/对焦/构图/用光）
   - 作者
   - 点赞数
   - 浏览量
   - 状态（草稿/已发布/已删除）
   - 操作（编辑/删除）

### 测试场景2: 搜索和筛选技巧

1. 在搜索框输入关键词，按回车或点击"搜索"
2. 在分类下拉框选择"人像"、"风光"、"街拍"或"建筑"
3. 点击"重置"清空筛选条件

### 测试场景3: 创建新技巧

1. 点击右上角"添加技巧"按钮
2. 填写表单：
   - **技巧标题**（必填）：例如"黄金时段的拍摄技巧"
   - **封面图片URL**：例如"https://example.com/tip.jpg"
   - **内容**（必填）：输入技巧的详细内容
   - **分类**（必填）：选择"风光"
   - **技术类型**：选择"用光"
   - **难度**：选择"入门"
   - **阅读时间**：输入分钟数（例如：5）
   - **作者ID**：输入作者的用户ID（例如：1）
   - **状态**：选择"草稿"、"已发布"或"已删除"
3. 点击"确定"提交
4. 查看列表中是否显示新创建的技巧

### 测试场景4: 编辑技巧

1. 在列表中找到要编辑的技巧
2. 点击该技巧行的"编辑"按钮
3. 修改表单中的信息（例如：修改内容）
4. 点击"确定"保存修改
5. 查看列表中该技巧信息是否已更新

### 测试场景5: 删除技巧

1. 在列表中找到要删除的技巧
2. 点击该技巧行的"删除"按钮
3. 在确认对话框中点击"确定"
4. 查看该技巧状态是否变为"已删除"（软删除）

### 测试场景6: 分页测试

1. 如果技巧数量超过10条，页面底部会显示分页器
2. 点击页码切换页面
3. 调整每页显示数量（10/20/50/100）

## 验收标准

### 功能完整性
- ✅ 课程列表正常显示
- ✅ 技巧库列表正常显示
- ✅ 搜索功能正常工作
- ✅ 筛选功能正常工作
- ✅ 创建功能正常工作
- ✅ 编辑功能正常工作
- ✅ 删除功能正常工作（软删除）
- ✅ 分页功能正常工作

### 用户体验
- ✅ 界面美观，布局合理
- ✅ 操作流畅，无卡顿
- ✅ 提示信息清晰（成功/失败/警告）
- ✅ 表单验证提示准确
- ✅ 确认对话框防止误操作

### 数据准确性
- ✅ 创建的数据正确保存到数据库
- ✅ 编辑的数据正确更新
- ✅ 删除操作使用软删除（status字段变更）
- ✅ 关联数据正确显示（讲师名称、作者名称）

### 权限控制
- ✅ 未登录用户无法访问管理页面
- ✅ Token过期自动跳转登录页
- ✅ 所有管理操作需要认证

## 常见问题排查

### 1. 列表显示为空
**可能原因**：
- 数据库中没有数据
- API请求失败
- Token过期

**解决方法**：
- 检查浏览器控制台的Network标签，查看API请求是否成功
- 检查后端日志是否有错误
- 确认用户已登录且Token有效

### 2. 创建/编辑失败
**可能原因**：
- 必填字段未填写
- 数据格式不正确
- 外键约束失败（讲师ID或作者ID不存在）

**解决方法**：
- 检查表单必填字段是否已填写
- 检查讲师ID/作者ID是否存在于users表中
- 查看浏览器控制台和后端日志的错误信息

### 3. 删除后数据仍显示
**可能原因**：
- 筛选条件包含已删除状态

**解决方法**：
- 删除操作是软删除，数据仍在数据库中
- 如需隐藏已删除数据，添加状态筛选功能

### 4. 封面图不显示
**可能原因**：
- 图片URL无效
- 图片跨域限制
- 图片加载慢

**解决方法**：
- 确认图片URL可访问
- 使用CDN托管的图片
- 等待图片加载完成

## API测试命令

### 测试课程列表API
```bash
# 替换YOUR_TOKEN为实际的JWT token
curl -X GET "http://localhost:3000/api/v1/admin/courses?page=1&pageSize=10" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### 测试创建课程API
```bash
curl -X POST http://localhost:3000/api/v1/admin/courses \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "title": "测试课程",
    "cover_image": "https://picsum.photos/300/200",
    "description": "这是一个测试课程",
    "category": "shooting",
    "difficulty": "beginner",
    "type": "video",
    "instructor_id": 1,
    "duration": 60,
    "price": 0,
    "is_free": 1,
    "status": 1
  }'
```

### 测试技巧列表API
```bash
curl -X GET "http://localhost:3000/api/v1/admin/tips?page=1&pageSize=10" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### 测试创建技巧API
```bash
curl -X POST http://localhost:3000/api/v1/admin/tips \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "title": "测试技巧",
    "cover_image": "https://picsum.photos/300/200",
    "content": "这是一个测试技巧的内容",
    "category": "landscape",
    "technique_type": "lighting",
    "difficulty": "beginner",
    "reading_time": 3,
    "author_id": 1,
    "status": 1
  }'
```

## 开发团队备注

- 前端基于 React + Ant Design 4.x
- 后端基于 Express.js + MySQL
- 使用JWT进行身份认证
- 所有删除操作使用软删除机制
- 支持分页、搜索、筛选功能
- 响应式设计，支持不同屏幕尺寸

**测试日期**: 2024-12-05  
**版本**: v1.0.0  
**状态**: ✅ 开发完成，待测试
